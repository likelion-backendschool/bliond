## íŒ€ êµ¬ì„±ì›


[íŒ€ì¥] ê¹€ë„ìœ¨

[íŒ€ì›] ê¹€ê°•ë¯¼, ë°•ì˜ìŠ¹, ì„ì±„ë¯¼, í—ˆê²½ì£¼

<br>

---

<br>

## íšŒê³  ë‚´ìš© ìš”ì•½ (ìµœì†Œ 500ì ì´ìƒ)


### ìƒˆë¡œ ì•Œê²Œ ëë˜ ì 

### ì¸í”„ë¼

- **ë„ì»¤ ì»¨í…Œì´ë„ˆ íŒŒì¼ ìˆ˜ì •í•˜ê¸°**
    - exec ë¡œ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ì§„ì…í•˜ê¸°
    
    ```docker
    docker exec -it nginx_1 bash  :  ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì§„ì…
    cd /usr/share/nginx/html  :  ì›¹ html ë£¨íŠ¸ í´ë”ë¡œ ì´ë™
    cat /etc/issue  :  ë¦¬ëˆ…ìŠ¤ ë°°í¬íŒ í™•ì¸ 
    cp index.html index.html.origin  :  ìˆ˜ì • íŒŒì¼ ë³µì‚¬
    vim index.html  :  ì›¹ html íŒŒì¼ ìˆ˜ì • 
    ```
    
    - ë³„ë„ì˜ í´ë” ìƒì„± í›„ ë‚´ë¶€ì— ì§„ì…í•˜ì§€ ì•Šê³  ìˆ˜ì •í•˜ê¸° (volume)
    
    ```docker
    docker rmi -f $(docker images -qa)  :  ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ì‚­ì œ
    sudo mkdir -p /docker_projects/nginx_1/volumes  :  ë„ì»¤ ë³¼ë¥¨ í´ë” ìƒì„±
    docker run -d -p 8031:80 --name=nginx_1 --rm -v /docker_projects/nginx_1/volumes/usr/share/nginx/html:/usr/share/nginx/html nginx  :  ì»¨í…Œì´ë„ˆ ìƒì„±
    sudo chown lldj1: -R /docker_projects  :  ê¶Œí•œë¶€ì—¬
    echo "Hello, There" > /docker_projects/nginx_1/volumes/usr/share/nginx/html:/usr/share/nginx/html/index.html  :  ì›¹ íŒŒì¼ ìƒì„±
    http://192.168.56.109:8031 => Hello, There!
    ```
    
- ìš°ë¦¬ë§Œì˜ ë°€í‚¤íŠ¸ë¥¼ ì„¤ê³„í•´ ì£¼ì„¸ìš”.2 (ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ ì£¼ì„¸ìš”)
    - ì´ë¯¸ì§€ëª… : nginxhello (nginx ê¸°ë°˜)
    - ì»¨í…Œì´ë„ˆëª… : nginxhello_1
    - ì‹¤í–‰ í›„ í¬ë¡¬ì—ì„œ index.html ì ‘ì†í•˜ë©´ Hello Nginx
    - ê²°ê³¼ : http://192.168.56.105:8032/ â‡’ Hello Nginx!
    
    ```docker
    mkdir -p /docker_projects/nginxhello_1/project  :  í´ë” ìƒì„±
    cd /docker_projects/nginxhello_1/project  :  í´ë” ì´ë™
    
    vim index.html  :  index.html íŒŒì¼ ìƒì„±
    <h1>Hello Nginx</h1>
    
    vim Dockerfile  :  Dockerfile ìƒì„±
    { í•´ë‹¹ ë‚´ìš© ë³µë¶™
    FROM node
    
    WORKDIR /usr/share/nginx/html
    
    COPY ./ ./
    
    EXPOSE 80
    
    # docker run ëª…ë ¹ì—ì„œ ì‹¤í–‰í•­ ëª…ë ¹ì´, ì´ ëª…ë ¹ì–´ ë¶€í„°ëŠ” ì œì‘íƒ€ì„ì´ ì•„ë‹Œ ëŸ°íƒ€ì„ì—ì„œ ì‹¤í–‰ë¨
    CMD ["nginx", "-g", "daemon off;"]
    }
    
    docker build -t nginxhello .  :  ë„ì»¤ ì´ë¯¸ì§€ ìƒì„±
    
    docker images :  ìƒì„±ëœ ë„ì»¤ ì´ë¯¸ì§€ í™•ì¸
    examhello, node:latest ìˆëŠ”ì§€ í™•ì¸(ì´ë¯¸ì§€ ì œì‘ ê³¼ì •ì—ì„œ ë‹¤ìš´ë¨)
    
    docker run -d -p 8032:80 --name=nginxhello_1 --rm nginxhello  :  nginxhelloì‹¤í–‰ 
    
    sudo systemctl restart docker  :  ë§Œì•½ ì˜ ì•ˆ ëœë‹¤ë©´ ì‹¤í–‰ í›„ examhello ì¬ì‹¤í–‰
    ```
    
    ### íŒŒì¼ ì—…ë¡œë“œ
    
    - ë¡œê·¸ì¸ ì—¬ë¶€ì— ë”°ë¼ **í˜ì´ì§€ ì ‘ê·¼ ê¶Œí•œ ë¶€ì—¬
    â†’ @**EnableGlobalMethodSecurityê°€ ìˆì–´ì•¼ ê¶Œí•œì„ ë¶€ì—¬í•  ìˆ˜ ìˆë‹¤.
        - @PreAuthorize(â€**isAnonymous( )**â€) : **ë¡œê·¸ì•„ì›ƒ**ëœ ìƒíƒœ
        - @PreAuthorize(â€**isAuthenticated( )**â€) : **ë¡œê·¸ì¸**ëœ ìƒíƒœ
        
        ```java
        @Configuration
        @EnableWebSecurity
        @EnableGlobalMethodSecurity(prePostEnabled = true)
        public class SecurityConfig{
           (.. ìƒëµ ..)
        }
        ```
        
    - **ë‚ ì§œ í˜•ì‹ í´ë”** ê²½ë¡œ ì¶”ê°€ (  /member/2022_09_14 )
        - memberë¡œë§Œ íŒŒì¼ì„ ì§€ì •í•˜ë©´ ë©”ëª¨ë¦¬ ë‚­ë¹„ê°€ ì‹¬í•´ì„œ ìš”ì¼ë³„ë¡œ ë¶„ë¦¬
        
        ```java
        --- MemberService.java ---
        
        public Member join() {
        		String profileImgDirName = "member/" + Util.date.getCurrentDateFormatted("yyyy_MM_dd");
        }
        ```
        
        ```java
        --- Util.java ---
        
        public class Util {
        		public static class date{
        				public static String getCurrentDateFormatted(String yyyy_MM_dd){
        							SimpleDateFormat simpleDateFormat = new SimpleDateFormat(pattern);
        		          return simpleDateFormat.format(new Date());
        					}
        		}
        } 
        ```
        
- user1ë¡œ ë¡œê·¸ì¸ í›„ í”„ë¡œí•„ í˜ì´ì§€ì— ì ‘ì†í•˜ë©´ user1ì˜ ì´ë©”ì¼ì´ ë³´ì—¬ì•¼ í•œë‹¤.
    - **get("/member/profile")** : GET ë°©ì‹ìœ¼ë¡œ í•´ë‹¹ URLì„ ë“¤ì–´ê°€ê² ë‹¤.
    - **with(user("user1").password("1234").roles("user")** : í•´ë‹¹ ì •ë³´ë¥¼ ê°€ì§€ê³  URLë¡œ ë“¤ì–´ê°€ê² ë‹¤.
    - **.andExpect(handler().handlerType(MemberController.class))** : í•´ë‹¹ GET ë°©ì‹ì˜ controller
    - **.andExpect(handler().methodName("showProfile"))** : GET ë°©ì‹ì˜ URLì„ ê°–ê³  ìˆëŠ” ë©”ì„œë“œëª…
    
    ```java
    @Test
    @DisplayName("user1ë¡œ ë¡œê·¸ì¸í›„ í”„ë¡œí•„ í˜ì´ì§€ì— ì ‘ì†, user1ì˜ ì´ë©”ì¼ì´ ë³´ì—¬ì•¼ í•¨.")
    void t3() throws Exception {
    		// When
    		// GET /
    		ResultActions resultActions = mvc
    				.perform(
    						get("/member/profile")
    								.with(user("user1").password("1234").roles("user"))
    				)
    				.andDo(print());
    
    		// Then
    		// ì•ˆë…•
    		resultActions
    				.andExpect(status().is2xxSuccessful()) // ì„±ê³µì´ ëœ¨ê³ 
    				.andExpect(handler().handlerType(MemberController.class))
    				.andExpect(handler().methodName("showProfile"))
    				.andExpect(content().string(containsString("user1@test.com")));
    	}
    ```
    
<br>

---

<br>

### ì–´ë ¤ì› ë˜ ì 

- íŒŒì¼ ì—…ë¡œë“œ ìŠ¤í”„ë§ë¶€íŠ¸ ìˆ˜ì—… ì¤‘ ì¿ í‚¤, ì„¸ì…˜, í† í° ê´€ë ¨ëœ ë‚´ìš©ì´ ë‚˜ì™”ëŠ”ë°.. ì–´ë ¤ì› ë‹¤ êµ‰ì¥íˆ ë§ì´ ë”°ë¡œ ì˜ìƒì„ ì°¾ì•„ë³´ê±°ë‚˜ ê°•ì‚¬ë‹˜ ë…¹í™”ë¥¼ ë§ì´ ëŒë ¤ë´ì•¼ê² ë‹¤.
- ì¸í”„ë¼ ìˆ˜ì—… ì¤‘ ì§ì ‘ ì´ë¯¸ì§€ë¥¼ ë§Œë“ ë‹¤ëŠ” ê°œë…ì´ ì¢€ ëª¨í˜¸í•˜ê²Œ ì´í•´ëê³  Dockerfile ë‚´ìš©ì— ì–´ë–¤ ê²Œ ë“¤ì–´ê°€ì•¼ ë ì§€ ì•„ì§ ëª…í™•í•˜ì§€ ì•Šì•„ í—¤ë§¸ë˜ ê±° ê°™ë‹¤.

<br>

---

<br>

### ì•„ì‰¬ìš´ ì 

- ì¸í”„ë¼ ìˆ˜ì—…ì„ í•œë²ˆ ë†“ì³ì„œ ê°•ì˜ê°€ ì´í•´ê°€ ì˜ë˜ì§€ ì•Šì•˜ëŠ”ë° ìˆ˜ì—…ì´ ëë‚œ í›„ ë³µìŠµí•˜ë©° íšŒê³ í•˜ëŠ” ì‹œê°„ì„ ê°€ì ¸ì•¼ê² ë‹¤.
- ë„ì»¤ ì¸í”„ë¼ ìˆ˜ì—… ì „ì— phpë¡œ ì¿ í‚¤, ì„¸ì…˜ì„ ë‹¤ë£¨ëŠ” ìˆ˜ì—…ì„ ë”°ë¼ê°€ì§€ ëª»í•´ì„œ ìŠ¤í”„ë§ ë¶€íŠ¸ íŒŒì¼ ì—…ë¡œë“œì— ë‚˜ì˜¤ëŠ” ì¿ í‚¤ ì„¸ì…˜ë„ ê°™ì´ ì´í•´í•˜ì§€ ëª»í–ˆë‹¤. phpë¡œ ì¿ í‚¤, ì„¸ì…˜ ë‹¤ë£¨ëŠ” ìˆ˜ì—…ì„ ë”°ë¼ê°„ í›„ ì˜¤ëŠ˜ ë°°ì› ë˜ ìŠ¤í”„ë§ë¶€íŠ¸ì— ì ìš©ë˜ëŠ” ê±¸ ì´í•´í•´ì•¼ê² ë‹¤.

## íšŒê³  ê³¼ì •ì—ì„œ ë‚˜ì™”ë˜ ì§ˆë¬¸ (ìµœì†Œ 200ì ì´ìƒ)


### ì§ˆë¬¸

1. soft deleteì™€ hard deleteì˜ ì°¨ì´ê°€ ë­”ê°€ìš”? ì–´ë–¤ ê²ƒì„ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œìš”?
2. SQLì—ì„œ VARCHAR ì™€ NVARCHAR ì°¨ì´

<br>

---

<br>

### ë‹µë³€

1. hard deleteëŠ” ìš°ë¦¬ê°€ ì—¬íƒœê» ì‚¬ìš©í•´ì˜¨ ê²ƒê³¼ ê°™ì´ DBì—ì„œ ë°ì´í„°ë¥¼ ì‹¤ì œë¡œ ì‚­ì œ í•˜ëŠ” ê²ƒì´ë‹¤. ë°˜ë©´ soft deleteëŠ” DBì—ì„œ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì¼ì¢…ì˜ flagë¥¼ í†µí•´ ë°ì´í„°ì˜ ì‚­ì œ ì—¬ë¶€ë¥¼ í‘œì‹œë§Œ í•˜ëŠ” ê²ƒì´ë‹¤. 
    
    ë”°ë¼ì„œ sqlì ìœ¼ë¡œ ë³´ì•˜ì„ ë•Œ, soft deleteëŠ” UPDATEê°€ ì¼ì–´ë‚˜ê³ , hard deleteëŠ” DELETEê°€ ì¼ì–´ë‚œë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.
    
    ì‹¤ì§ˆì ìœ¼ë¡œ DBë¥¼ ë‹¤ë£° ë•Œ hard deleteì™€ soft deleteëŠ” ë‹¤ë¥¸ ìƒí™©ì— ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ í•„ìš”ì— ë”°ë¼ soft deleteë¥¼ í•˜ê³  ì¼ì • ê¸°ê°„ì´ ì§€ë‚œ ë°ì´í„°ë¥¼ hard deleteí•˜ê±°ë‚˜ í•˜ëŠ” ë°©ì‹ê³¼ ë°”ë¡œ hard deleteë¥¼ ì§„í–‰í•˜ëŠ” ëª¨ë“  ë°©ì‹ì„ ê³ ë ¤í•˜ê³  ìˆë‹¤.
    
2. varcharëŠ” ë°”ì´íŠ¸ ìˆ˜, nvarcharëŠ” ê¸€ì ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•œë‹¤.
Â varcharëŠ” ê°€ë³€ ë¬¸ìì—´ì´ë©°, nvarcharëŠ” ìœ ë‹ˆì½”ë“œ ì§€ì› ê°€ë³€ ë¬¸ìì—´ì´ë‹¤.
 
 <br>

---

<br>


## íšŒê³  ì¸ì¦ìƒ· & íŒ€ ìë‘

### ì¸ì¦ìƒ·

![image](https://user-images.githubusercontent.com/27273017/190582535-bbf4e48c-b13d-42ab-b6ac-160d1f6b8117.png)

<br>

---

<br>

### ìë‘ ë©˜íŠ¸

- ë„ìœ¨: í™”ì´íŒ…
- ì˜ìŠ¹: ë‚¨ì€ ê¸°ê°„ë„ í™”ì´íŒ…ì…ë‹ˆë‹¤!
- ì±„ë¯¼: ë”± 2ì£¼ ë‚¨ì•˜ì–´ìš”!! ì €í¬ ë§ˆì§€ë§‰ê¹Œì§€ ã…ã… í™”ì´íŒ…!!
- ê²½ì£¼: ì´ì œ ë‹¬ë ¤ë´…ì‹œë‹¤ ğŸƒğŸ»â€â™€ï¸
